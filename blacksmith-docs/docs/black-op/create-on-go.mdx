import ParamsList from '@site/src/components/ParamsList';

# CreateOnGo

:::caution Important
This only works if you extend the `BlackOp` class. More info about that [here](../../etc/blackop). It's essentially LinearOpMode with
a few extra utilities, and it's made for use with the Blacksmith Library.
:::

The `createOnGo` function provides two different methods to keep your component creation simple and idiomatic.

You know how in a typical OpMode you have to be all like this or something?

```kotlin
private lateinit var myArm: MyArmClass // Unidiomatic unneccesary mutable state

override fun init() {
    myArm = MyArmClass(hardwareMap) // Also ugly and duplication of the name/class.
}
```

With `BlackOp` and `createOnGo`, you can simply do this instead:

```kotlin
// Immutable state, no duplication
// Keep in mind you need to use lambdas though
// for each parameter
private val myArm by createOnGo<MyArmClass>({ hwMap })
```

If you need to call a method or have a lot of parameters or do something more advanced or something, you can simply
pass in a single supplier lambda that returns the object you want to create.

```kotlin
// No need to explicitly say '<DcMotorEx>' here since Kotlin can infer it from the function return type
private val myThing by createOnGo {
    createSomethingThroughAFunction(1, 2, 3, 4, 5, hwMap, anotherFunction(hwmap))
}
```

:::warning
Method 1 uses reflection, so it can occasionally be a bit finicky. If you're having issues, try method 2.

Take care that the argument's return types are the same as the desired constructor, and that the order is the same, as
the method parameters are NOT type safe.
:::

## `createOnGo` Method 1

<ParamsList params={[
  {
    name: 'args',
    type: 'vararg () -> Any',
    desc: 'Any number of lambda functions that return the parameters you want to pass to the constructor of the class you want to create. Not evaluated until the OpMode is started.'
  }
]}/>

## `createOnGo` Method 2

<ParamsList params={[
  {
    name: 'constructor',
    type: '() -> T',
    desc: 'A lambda function that returns the object you want to create. Not evaluated until the OpMode is started.'
  }
]}/>
